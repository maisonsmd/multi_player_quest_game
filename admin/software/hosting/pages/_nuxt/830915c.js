(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{253:function(t,e,n){t.exports=n.p+"img/background.2c6bfab.png"},264:function(t,e){},265:function(t,e,n){var content=n(309);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(66).default)("8bb2898c",content,!0,{sourceMap:!1})},308:function(t,e,n){"use strict";var r=n(265);n.n(r).a},309:function(t,e,n){var r=n(65),o=n(266),c=n(253);e=r(!1);var l=o(c);e.push([t.i,".container-fluid{margin:0 auto;min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center}.field-label{padding:0;margin:0;text-align:left}body{background-color:#eceff1!important;background:url("+l+");background-repeat:no-repeat;background-size:cover;background-position:50%}",""]),t.exports=e},321:function(t,e,n){"use strict";n.r(e);n(104),n(29),n(13),n(19),n(36);var r=n(258),o=n.n(r),c=n(80),l=n.n(c),_={name:"admin",components:{},data:function(){return{host:"",btn_variant:{start_answer:"outline-success",stop_answer:"outline-danger",enable_bell:"outline-warning",update_display:"outline-warning"},alert:{dismiss_countdown:0,message:""},stopwatch:{running:!1,start:0,interval_timer:-1,string:"0:00.00"},socket:null,connected:!1,render:!1,players:[],num_players:6,bell_audio:new Audio("ding.mp3"),waiting_bell:!1}},created:function(){var t=this;if(this.host="http://".concat(window.location.hostname,":3001"),document.title="admin","localhost"==window.location.hostname){this.render=!0,this.init_socket();for(var i=0;i<this.num_players;i++)this.$set(this.players,i,{index:i,name:"ĐỘI "+(i+1),score:0,answer:"",time_of_answer:"",order_of_answer:0});this.request_stopwatch(),l.a.get("".concat(this.host,"/players")).then((function(e){for(var n=0;n<t.num_players;n++)t.players[n].score=e.data[n].score,t.players[n].answer=e.data[n].answer,t.players[n].time_of_answer=e.data[n].time_of_answer>0?t.convert_to_time_string(e.data[n].time_of_answer):"",t.players[n].order_of_answer=e.data[n].order_of_answer})),document.onkeydown=function(e){if(e.shiftKey||e.altKey||e.SHIFTKey)switch(["1","2","3","4"," ","!","@","#","$"].includes(e.key)&&e.SHIFTKey&&e.preventDefault(),e.key){case"1":case"!":t.start_answer(),t.btn_variant.start_answer="success",setTimeout((function(){return t.btn_variant.start_answer="outline-success"}),300);break;case"2":case"@":t.stop_answer(),t.btn_variant.stop_answer="danger",setTimeout((function(){return t.btn_variant.stop_answer="outline-danger"}),300);break;case"3":case"#":t.enable_bell(),t.btn_variant.enable_bell="warning",setTimeout((function(){return t.btn_variant.enable_bell="outline-warning"}),300);break;case"4":case"$":t.update_display(),t.btn_variant.update_display="warning",setTimeout((function(){return t.btn_variant.update_display="outline-warning"}),300)}}}else window.location.href="/"},methods:{convert_to_time_string:function(t){var dt=new Date(t),e=dt.toLocaleTimeString().toLowerCase(),time=e.substring(e.indexOf(":")+(dt.getMinutes()<10?2:1),e.length),n=dt.getMilliseconds(),r=""+n;return r=n<10?"0"+r:r.substring(0,2),time.replace(/ (am|pm)/,".")+r},init_socket:function(){var t=this;this.socket=o.a.connect(this.host),this.socket.on("connect",(function(){t.connected=!0,console.log("connected")})),this.socket.on("disconnect",(function(){t.connected=!1,console.log("disconnected")})),this.socket.on("stopwatch_start",(function(data){t.stopwatch.start=Date.now(),t.stopwatch.running=!0})),this.socket.on("stopwatch_stop",(function(data){t.stopwatch.running?(t.stopwatch.string=t.convert_to_time_string(data),t.stopwatch.running=!1):t.stopwatch.string=t.convert_to_time_string(0)})),this.socket.on("update",(function(data){for(var i=0;i<t.num_players;i++)t.players[i].score=data[i].score,t.players[i].answer=data[i].answer,t.players[i].time_of_answer=data[i].time_of_answer>0?t.convert_to_time_string(data[i].time_of_answer):"",t.players[i].order_of_answer=data[i].order_of_answer})),this.socket.on("bell",(function(e){t.waiting_bell=e.waiting,e.waiting||(t.show_alert("Đội ".concat(e.team+1," trả lời!")),t.bell_audio.currentTime=.1,t.bell_audio.play())})),this.stopwatch.interval_timer=setInterval((function(){t.stopwatch.running&&(t.stopwatch.string=t.convert_to_time_string(Date.now()-t.stopwatch.start))}),100)},request_stopwatch:function(){var t=this;l.a.get("".concat(this.host,"/stopwatch")).then((function(e){t.stopwatch.running=e.data.stopwatch.running,t.stopwatch.start=Date.now()-e.data.stopwatch.elapsed}))},update_display:function(){this.stopwatch.running?this.show_alert("Ngừng nhận đáp án trước!"):this.socket.emit("update_display")},update_temp_score:function(){this.socket.emit("update_temp_score",this.players)},start_answer:function(){this.socket.emit("start_answer")},stop_answer:function(){this.socket.emit("stop_answer")},alert_countdown_changed:function(t){this.alert.dismiss_countdown=t},show_alert:function(t){this.alert.dismiss_countdown=2,this.alert.message=t},enable_bell:function(){this.socket.emit("enable_bell")}}},w=(n(308),n(62)),component=Object(w.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.render?n("b-container",{attrs:{fluid:""}},[n("b-alert",{staticStyle:{"max-width":"300px",position:"fixed",top:"10px",left:"10px","z-index":"98","font-size":"2rem"},attrs:{show:t.alert.dismiss_countdown,fade:"",variant:"warning"},on:{"dismiss-count-down":t.alert_countdown_changed}},[t._v(t._s(t.alert.message)+"\n  ")]),t._v(" "),t.connected?t._e():n("b-alert",{staticClass:"text-uppercase font-weight-bold",staticStyle:{"max-width":"300px",position:"fixed",top:"10px",left:"10px"},attrs:{variant:"danger",show:"",fade:""}},[t._v("\n    lost connection!")]),t._v(" "),n("div",{staticClass:"w-100 mt-5 pt-5"},[n("b-row",{staticClass:"m-0",attrs:{"align-h":"center"}},t._l(t.players,(function(e,r){return n("b-col",{key:r,staticClass:"p-1",attrs:{sm:"2"}},[n("b-card",{staticClass:"mb-2 shadow",attrs:{title:e.name,tag:"article"}},[n("b-row",{staticClass:"mt-2"},[n("p",{staticClass:"field-label"},[t._v("Điểm số")]),t._v(" "),n("b-input",{staticClass:"text-center",staticStyle:{"font-size":"1.5rem"},attrs:{type:"number"},model:{value:e.score,callback:function(n){t.$set(e,"score",n)},expression:"player.score"}})],1),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("b-col",{staticClass:"p-0 pr-1",attrs:{sm:"6"}},[n("b-button",{staticClass:"w-100",attrs:{variant:"outline-danger"},on:{click:function(n){e.score=+e.score-10,e.score<0&&(e.score=0),t.update_temp_score()}}},[t._v("\n                -10\n              ")])],1),t._v(" "),n("b-col",{staticClass:"p-0 pl-1",attrs:{sm:"6"}},[n("b-button",{staticClass:"w-100",attrs:{variant:"outline-success"},on:{click:function(e){t.players[r].score=+t.players[r].score+10,t.update_temp_score()}}},[t._v("\n                +10\n              ")])],1)],1),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("p",{staticClass:"field-label"},[t._v("Đáp án")]),t._v(" "),n("b-form-textarea",{staticClass:"text-center text-uppercase font-weight-bold text",attrs:{size:"lg",rows:"3","no-resize":"",disabled:""},model:{value:e.answer,callback:function(n){t.$set(e,"answer",n)},expression:"player.answer"}})],1),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("p",{staticClass:"field-label"},[t._v("Thời gian trả lời")]),t._v(" "),n("b-input",{staticClass:"text-center font-weight-bold",staticStyle:{"font-size":"1.5rem"},attrs:{disabled:""},model:{value:e.time_of_answer,callback:function(n){t.$set(e,"time_of_answer",n)},expression:"player.time_of_answer"}})],1),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("p",{staticClass:"field-label"},[t._v("Thứ tự")]),t._v(" "),n("h1",{staticClass:"pl-2"},[t._v("\n              "+t._s(e.order_of_answer>0?e.order_of_answer:"_")+"\n            ")])])],1)],1)})),1),t._v(" "),n("b-row",{attrs:{"align-h":"center"}},[n("b-col",{attrs:{sm:"3"}},[n("b-button",{staticClass:"p-3 text-white text-uppercase",staticStyle:{"font-size":"1.5rem"},attrs:{variant:t.btn_variant.start_answer},on:{click:t.start_answer}},[t._v("\n          Bấm giờ trả lời"),n("br"),t._v("(shift+1)")])],1),t._v(" "),n("b-col",{attrs:{sm:"3"}},[n("b-button",{staticClass:"p-3 text-white text-uppercase",staticStyle:{"font-size":"1.5rem"},attrs:{variant:t.btn_variant.stop_answer},on:{click:t.stop_answer}},[t._v("\n          Dừng đồng hồ"),n("br"),t._v("(shift+2)")])],1),t._v(" "),n("b-col",{attrs:{sm:"3"}},[n("b-button",{staticClass:"p-3 text-white text-uppercase",staticStyle:{"font-size":"1.5rem"},attrs:{variant:t.btn_variant.enable_bell,disabled:t.waiting_bell},on:{click:t.enable_bell}},[t._v("\n          Cho phép chuông"),n("br"),t._v("(shift+3)")])],1),t._v(" "),n("b-col",{attrs:{sm:"3"}},[n("b-button",{staticClass:"p-3 text-white text-uppercase",staticStyle:{"font-size":"1.5rem"},attrs:{variant:t.btn_variant.update_display},on:{click:t.update_display}},[t._v("\n          cập nhập điểm"),n("br"),t._v("(shift+4)")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{sm:"12"}},[n("h1",{staticClass:"text-white text-monospace mt-3",staticStyle:{"font-size":"5rem"}},[t._v("\n          "+t._s(t.stopwatch.string)+"\n        ")])])],1)],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);